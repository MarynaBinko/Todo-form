{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["const BASE_URL = \"http://localhost:3000/todos\";\n\nconst form = document.querySelector(\".todo-form\");\nconst container = document.querySelector(\".list\");\n\nform.addEventListener(\"submit\", handleSubmit);\ncontainer.addEventListener(\"click\", handleDelete);\ncontainer.addEventListener(\"click\", handleUpdate);\n\nasync function fetchData(url, options = {}) {\n  const response = await fetch(url, options);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  }\n  return await response.json();\n}\n\n\nfetchData(BASE_URL)\n  .then((todos) => {\n    container.innerHTML = createMarkup(todos);\n  })\n  .catch((error) => console.error(\"Error fetching todos:\", error));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(({ id, title, completed }) => `\n      <li data-id=\"${id}\" class=\"list-item\">\n        <input type=\"checkbox\" class=\"list-checkbox\" ${completed && \"checked\"}>\n        <h2 class=\"list-title\">${title}</h2>\n        <button class=\"list-btn\">X</button>\n      </li>\n    `)\n    .join(\"\");\n}\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  const { todo } = event.currentTarget.elements;\n\n  try {\n    const newTask = { title: todo.value, completed: false };\n    await fetchData(BASE_URL, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(newTask),\n    });\n\n    const todos = await fetchData(BASE_URL);\n    container.innerHTML = createMarkup(todos);\n\n    form.reset();\n  } catch (error) {\n    console.error(\"Failed to add task:\", error.message);\n  }\n}\n\nasync function handleUpdate(event) {\n  if (!event.target.classList.contains(\"list-checkbox\")) {\n    return;\n  }\n  event.preventDefault();\n\n  const parent = event.target.closest(\".list-item\");\n  const id = parent.dataset.id;\n\n  try {\n    await fetchData(`${BASE_URL}/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ completed: event.target.checked }),\n    });\n  } catch (error) {\n    console.error(\"Failed to update task:\", error.message);\n  }\n}\n\nfunction handleDelete(event) {\n  if (!event.target.classList.contains(\"list-btn\")) {\n    return;\n  }\n  const parent = event.target.closest(\".list-item\");\n  const id = parent.dataset.id;\n\n  fetchData(`${BASE_URL}/${id}`, {\n    method: \"DELETE\",\n  })\n    .then(() => {\n      parent.remove();\n    })\n    .catch((error) => {\n      console.error(\"Failed to delete task:\", error.message);\n    });\n}"],"names":["BASE_URL","form","container","handleSubmit","handleDelete","handleUpdate","fetchData","url","options","response","todos","createMarkup","error","arr","id","title","completed","event","todo","newTask","parent"],"mappings":"ssBAAA,MAAMA,EAAW,8BAEXC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAY,SAAS,cAAc,OAAO,EAEhDD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAEhD,eAAeC,EAAUC,EAAKC,EAAU,GAAI,CAC1C,MAAMC,EAAW,MAAM,MAAMF,EAAKC,CAAO,EACzC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAO,MAAMA,EAAS,MACxB,CAGAH,EAAUN,CAAQ,EACf,KAAMU,GAAU,CACfR,EAAU,UAAYS,EAAaD,CAAK,CAC5C,CAAG,EACA,MAAOE,GAAU,QAAQ,MAAM,wBAAyBA,CAAK,CAAC,EAEjE,SAASD,EAAaE,EAAK,CACzB,OAAOA,EACJ,IAAI,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,CAAW,IAAK;AAAA,qBAClBF,CAAE;AAAA,uDACgCE,GAAa,SAAS;AAAA,iCAC5CD,CAAK;AAAA;AAAA;AAAA,KAGjC,EACA,KAAK,EAAE,CACZ,CAEA,eAAeZ,EAAac,EAAO,CACjCA,EAAM,eAAc,EACpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,cAAc,SAErC,GAAI,CACF,MAAME,EAAU,CAAE,MAAOD,EAAK,MAAO,UAAW,IAChD,MAAMZ,EAAUN,EAAU,CACxB,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAUmB,CAAO,CAClC,CAAK,EAED,MAAMT,EAAQ,MAAMJ,EAAUN,CAAQ,EACtCE,EAAU,UAAYS,EAAaD,CAAK,EAExCT,EAAK,MAAK,CACX,OAAQW,EAAO,CACd,QAAQ,MAAM,sBAAuBA,EAAM,OAAO,CACnD,CACH,CAEA,eAAeP,EAAaY,EAAO,CACjC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,eAAe,EAClD,OAEFA,EAAM,eAAc,EAGpB,MAAMH,EADSG,EAAM,OAAO,QAAQ,YAAY,EAC9B,QAAQ,GAE1B,GAAI,CACF,MAAMX,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CACnC,OAAQ,QACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,UAAWG,EAAM,OAAO,QAAS,CAC9D,CAAK,CACF,OAAQL,EAAO,CACd,QAAQ,MAAM,yBAA0BA,EAAM,OAAO,CACtD,CACH,CAEA,SAASR,EAAaa,EAAO,CAC3B,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,UAAU,EAC7C,OAEF,MAAMG,EAASH,EAAM,OAAO,QAAQ,YAAY,EAC1CH,EAAKM,EAAO,QAAQ,GAE1Bd,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CAC7B,OAAQ,QACZ,CAAG,EACE,KAAK,IAAM,CACVM,EAAO,OAAM,CACnB,CAAK,EACA,MAAOR,GAAU,CAChB,QAAQ,MAAM,yBAA0BA,EAAM,OAAO,CAC3D,CAAK,CACL"}